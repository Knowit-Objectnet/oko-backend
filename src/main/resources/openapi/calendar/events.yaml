get:
  tags:
    #- everyone
    - uttaks
  summary: Gets uttaks
  operationId: getUttaks
  parameters:
    - in: query
      name: uttakId
      schema:
        type: integer
        format: int64
      example: 1
    - in: query
      name: recurrenceRuleId
      schema:
        type: integer
        format: int64
      example: 1
    - in: query
      name: fromDate
      schema:
        type: string
        format: date-time
      example: "2020-07-13T15:00:00Z"
    - in: query
      name: toDate
      schema:
        type: string
        format: date-time
      example: "2020-07-20T15:00:00Z"
    - in: query
      name: partnerId
      schema:
        type: integer
        format: int64
      example: 1
    - in: query
      name: stationId
      schema:
        type: integer
        format: int64
      example: 1
  responses:
    '200':
      description: Returns an array of all the uttaks that matched the query.
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '../api.yaml#/components/schemas/Uttak'
    '400':
      description: Bad request body
    '422':
      description: Validation of request body failed. Unprocessable entity
    '500':
      description: Internal server error

post:
  tags:
    #- reg-admin
    - uttaks
  summary: adds one or more uttaks to the database.
  operationId: addUttaks
  description: Adds one or more uttaks to the database. This also creates corresponding weight reports with nulled weight.
  responses:
    '200':
      description: item created. Returns the created uttak. If recurring, the first uttak is returned.
      content:
        application/json:
          schema:
            $ref: '../api.yaml#/components/schemas/Uttak'
    '400':
      description: Bad request body
    '401':
      description: Unauthorized
    '403':
      description: Insufficient role privileges
    '422':
      description: Validation of request body failed. Unprocessable entity
    '500':
      description: Internal server error
  requestBody:
    content:
      application/json:
        schema:
          $ref: '../api.yaml#/components/schemas/UttakPost'

patch:
  tags:
    #- reg-admin
    #- reuse-station
    - uttaks
  summary: Updates an uttak
  operationId: patchUttak
  description: |
    Updates a singular uttak in the database.
  responses:
    '200':
      description: Updated uttak
      content:
        application/json:
          schema:
            $ref: '../api.yaml#/components/schemas/Uttak'
    '400':
      description: Bad request body
    '401':
      description: Unauthorized
    '403':
      description: Forbidden. Insufficient role permissions.
    '404':
      description: ID not found
    '422':
      description: Unprocessable request body. Validation of request body failed
    '500':
      description: Internal server error
  requestBody:
    content:
      application/json:
        schema:
          $ref: '../api.yaml#/components/schemas/UttakPatch'

delete:
  tags:
#    - reg-admin
#    - reuse-station
#    - partner
    - uttaks
  summary: Deletes uttaks
  operationId: deleteUttaks
  description: |
    Deletes one or several uttaks from the database. Deletion can be specified through the use of query parameters.
    Reuse station workers and REG admin will be able to delete any uttak, whilst a partner only has permission to delete
    their own uttaks.
  parameters:
    - in: query
      name: uttakId
      schema:
        type: integer
        format: int64
      example: 1
    - in: query
      name: recurrenceRuleId
      schema:
        type: integer
        format: int64
      example: 1
    - in: query
      name: fromDate
      schema:
        type: string
        format: date-time
      example: "2020-07-13T15:00:00Z"
    - in: query
      name: toDate
      schema:
        type: string
        format: date-time
      example: "2020-07-20T15:00:00Z"
    - in: query
      name: partnerId
      schema:
        type: integer
        format: int64
      example: 1
    - in: query
      name: stationId
      schema:
        type: integer
        format: int64
      example: 1
  responses:
    '200':
      description: Uttak(s) deleted
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '../api.yaml#/components/schemas/Uttak'
            description: A list of deleted uttaks
    '400':
      description: Bad request body
    '401':
      description: Unauthorized
    '403':
      description: Forbidden. Insufficient role permissions.
    '404':
      description: ID not found
    '422':
      description: Unprocessable request body. Validation of request body failed
    '500':
      description: Internal server error